<script>
    import Highlight from "svelte-highlight";
    import typescript from "svelte-highlight/languages/typescript";
</script>

<h1>HTML, CSS and Javascript</h1>
<p>
  Back in the 1990s, java was the programming language of choice if you wanted something visual and interactive on your screen. 
  Over the years, this has shifted towards standard web technologies HTML, CSS and javascript.
</p>

<h2>General HTML file structure</h2>
<p>
    Any website you visit basically consists of the same components. The whole page is contained within a `html` section, 
    which will contain a `body`, and possibly a `head` and `script`. Below is a minimal html page.
</p>

<Highlight language={typescript} code=
'<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        The actual content is here...
    </body>
</html>
'
/>

<p>Here is a page containing some actual content:</p>

<Highlight language={typescript} code=
'<!DOCTYPE html>
<html>
    <head>
        <title>My webpage</title>
    </head>
    <body>
        <h1>Introduction to HTML</h1>
        <h2>Simple structure</h2>
        <p>Most webpages have a simple structure; see this course...</p>

        <h2>Images and external links</h2>
        <p>These pages can contain images and links, for example:</p>
        <img src="http://vda-lab.github.io/assets/stad_airquality.png" width=200 />
        <a href="http://vda-lab.github.io">Link to VDA-lab website</a>
    </body>
</html>'/>

<h2>Create your first page</h2>
<p>
    At this point, create a file called with an `.html` extension with the contents shown above 
    (e.g. using vscode), and open it in any webbrowser. At this point, we suggest creating a separate 
    file for different exercises (e.g. `exercise1.html`, `exercise2.html`, etc).
</p>

<h2>The Document Object Model (DOM)</h2>
<p>
    To give some structure to HTML we use _tags_ to indicate _elements_. The collection of all these 
    (nested) elements is called the Document Object Model or _DOM_.
    Tags exist to denote headers, lists, paragraphs, etc.
    Most tags need to be _opened_ and then _closed_. For example:
</p>

<!--
- `<li>` ... `</li>`
- `<h3>` ... `</h3>`

There are some exceptions, such as when you create a horizontal line (`<hr/>`) or want to add a linebreak (`<br/>`).

Here's a list of the most relevant attributes:

- `<h1>`, `<h2>` ...: heading of level 1, 2, ...
- `<ul>`: unordered list
- `<ol>`: ordered list
- `<li>`: list item within unordered or ordered list
- `<p>`: paragraph
- `<g>`: group other elements
- ...

`<div>` is a generic container that will be useful later in the tutorial.

You can find a complete list of HTML elements at https://developer.mozilla.org/en-US/docs/Web/HTML/Element[https://developer.mozilla.org/en-US/docs/Web/HTML/Element].

==== Attributes
Tags can have attributes, for example:

- `<a href="www.google.com">` defines the destination of a link, for example like http://www.google.com[this].
- `<p style="color: blue">` sets the colour of that paragraph to blue
- ...

===== `id` and `class`
We will use the special attributes `id` and `class` a lot later in this session.

The `id` attribute gives an element a certain id (obviously), and that id needs to be unique within the document.

The `class` attribute assigns that element to a certain class. We can use this to easily select different elements together. See for example the `unimportant` class that we add to two of the shopping list items below. A single HTML element can have multiple classes. We can do this by adding them in all separate with a
space. For example: `<li class="datapoint selected">`.

===== Some other examples
[source,html, linenums]
----
<p>Shopping list:</p>
<ul>
<li class="unimportant">Eggs</li>
<li class="unimportant">Milk</li>
<li>Toothpaste</li>
</ul>
----

A button that does nothing, and a generic `div` element. But note that the generic `div` has an `id`.

[source,html, linenums]
----
<button type="submit">Submit</button>
<div id="my_new_div">... and a generic HTML block with an id</div>
----

=== Styling elements using CSS
A typical website will not only contain HTML, but also CSS (cascading style sheets) and javascript.

HTML:: provides the basic structure of the page, which can be enhanced using CSS and javascript
CSS:: is used to control presentation, formatting and layout: what it _looks_ like.
javascript:: is used to control the _behaviour_ of different elements and the page as a whole.

There are different ways to add CSS to your webpage.

==== Inline CSS
We can add CSS directives using the `style` attribute on HTML elements. For example:

[source,html, linenums]
----
<html>
    <head>
        <title>My HTML file</title>
    </head>
    <body>
        <h1 style="color: red;">HTML, CSS and javascript</h1>
        <p style="font-family: cursive;">Shopping list:</p>
        <ul>
            <li style="color: blue;">Eggs</li>
            <li style="color: blue; opacity: 0.5;">Milk</li>
            <li style="color: blue;">Toothpaste</li>
        </ul>
        <p>Link to the VDA-lab website is <a style="font-weight: bold;" href="http://vda-lab.github.io">here</a>.</p>
        <button type="submit">Submit</button>
        <div id="my_new_div">... and a generic HTML block with an id</div>
    </body>
</html>
----

What it looks like:

image:inline_css.png[width=50%,pdfwidth=50%]

==== CSS in the head
When we use CSS inline as above, we can set the style for individual elements. But if we want to make all headers bold, we'd need to add `font-weight: bold` to _every_ single `<h1>`. To set the style for whole groups of elements, we better define that once instead of for each element. We can do this in the `<head>` using the `<style>` element. In the example below, we make all headers of level 1 green, each list item should be blue, and links should be bold.

[source,html, linenums]
----
<html>
    <head>
        <title>My HTML file</title>
        <style>
            li { color: blue; }
            h1 { color: green; }
            a { font-weight: bold;}
        </style>
    </head>
    <body>
        <h1>CSS in the head</h1>
        <p>We have some text here with a <a href="www.google.com">link</a> to Google, and a list:</p>
        <ul>
            <li>Eggs</li>
            <li style="opacity: 0.5;">Milk</li>
            <li>Toothpaste</li>
        </ul>
    </body>
</html>
----

The result:

image:css_in_head.png[width=50%,pdfwidth=50%]

As you can see in this example, you can combine CSS in the head with inline CSS in which case the inline CSS takes precedence: the second list item is partly transparent.

==== Using CSS selectors
In the last example, we set the color for every list item to blue, but wanted to have one specific item transparent as well. We did this by combining CSS directives at two different places. A better approach is to separate the HTML and CSS even more, instead of hard-coding this transparency. We can do this using *CSS selectors*. These are a very powerful way to _select_ different elements. The `id` and `class` attributes we mentioned above are crucial.

- To select all elements of a certain _type_ (e.g. `<h1>` or `<p>`), use the name of that element.
- To select all elements with a certain _class_ (e.g. `<li class="important">`), prepend that class with a period `.`.
- To select the element with a given _id_ (e.g. `<p id="paragraph_5>`), prepend that id with a hash `#`.

Your CSS can look like this:
[source,css, linenums]
----
h1 { color: red; }
a { font-weight: bold;}
p {
    max-width: 400px;
}
.unimportant {
    opacity: 0.5
}
#paragraph_5 { font-family: cursive; }

ul li { color: blue; }
p:hover {
    background-color: aqua;
}
p::first-letter {
    font-size: larger;
    font-weight: bolder;
}
----
In the above, we

- make all `<h1>` red
- make all links `<a>` bold
- set the maximum with of all paragraphs (`<p>`) to 400 pixels
- give all elements that have `unimportant` as a class an opacity of 50%
- set the element with `id` of `paragraph_5` in italics

Those are the most basic selectors. But these can be combined and make much more complex. In the following line, we set the colour of a list item `<li>` to blue, but only if it's preceded by a `<ul>`. This means that items in an _ordered_ list (`<ol>`) will _not_ be blue. We can also use _pseudo-classes_, like `:hover` (which matches the element your mouse is hovering on), or `::first-letter` (which speaks for itself).

For the full reference, see https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors[https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors].

[source,html, linenums]
----
<html>
    <head>
        <title>My HTML file</title>
        <style>
            ul li { color: blue; }
            h1 { color: red; }
            a { font-weight: bold;}
            .unimportant {
                opacity: 0.5
            }
            p {
                max-width: 400px;
            }
            #paragraph_5 { font-family: cursive; }
            p:hover {
                background-color: aqua;
            }
            p::first-letter {
                font-size: larger;
                font-weight: bolder;
            }
        </style>
    </head>
    <body>
        <h1>CSS selectors</h1>
        <p style="font-family: cursive;">Shopping list:</p>
        <ul>
            <li class="unimportant">Eggs</li>
            <li class="unimportant">Milk</li>
            <li>Toothpaste</li>
        </ul>
        <p>Link to the VDA-lab website is <a href="http://vda-lab.github.io">here</a>.</p>
        <p id="paragraph_5">This is a handwritten paragraph.</p>
        <h2>Explanation</h2>
        <p>In CSS (= Cascading Style Sheets) you define the style. There are 3 main ways (there are more)
            to tell the css which elements should get that style, using <b>CSS selectors</b>:
        </p>
        <ol>
            <li><b>element</b>: e.g. <kbd>h1 {color: red}</kbd></li>
            <li><b>class</b>: e.g. <kbd>.unimportant {opacity: 0.5}</kbd>)
                => prepend with a period <kbd>.</kbd></li>
            <li><b>id</b>: e.g. <kbd>#paragraph_5</kbd> => prepend with a
                hash <kbd>#</kbd>.</li>
            <li><b>*</b>: everything</li>
        </ol>
        You can also use <em>pseudo-classes</em>:
        <ol>
            <li><b>:hover</b>: matches an elements that is being hovered over by the mouse, 
                e.g. <kbd>p:hover</kbd></li>
            <li><b>::first-letter</b>: first letter in an element</li>
            <li>...</li>
        </ol>
    </body>
</html>
----

has this result:

image:css_selectors.png[width=50%,pdfwidth=50%]

Notice the brightly coloured paragraph...

==== CSS in a separate file
Instead of adding the complete css inline or in the head of a file, we can also put it in a separate file. We load this file in the head, using `<link rel="stylesheet" href="my_css_file.css">`.

For example:

[source,html, linenums]
----
<html>
    <head>
        <title>My HTML file</title>
        <link rel="stylesheet" href="flashy_styles.css">
    </head>
    <body>
        <h1>HTML and CSS</h1>
        <p>Some text here...</p>
    </body>
</html>
----

.Developer tools and console
****
Whatever you write in the `.html` file, it gets _rendered_ in the browser so you do not see the tags anymore. However, each browser has _developer tools_ that allow you to get to the underlying HTML code. You can activate them here:

- Chrome: View > Developer > Developer Tools
- Firefox: Tools > Browser Tools > Web Developer Tools
- Safari: Develop > Show Web Inspector
- Vivaldi: Tools > Developer Tools

image:developer_tools.png[]

In the image above you see the rendered version of the page on the left, and the underlying source on the right.

You will also see a tab named `console` in the developer tools.

TIP: To know what's going on in your javascript code, you can add `console.log(your_variable)`. The value of that variable will then be visible in the console.
****

=== Adding behaviour using javascript
We can use javascript to add additional functionality to a site.

==== Inline javascript
We can add the javascript within the `body` between `script` tags. If we want to reference existing elements (such as the `demo` element in our example below, we have to put the `script` at the _end_ of the `body`. In this example below, a counter is updated every time we push the button.

[source,html,linenums]
----
<html>
    <head>
        <title>My HTML file</title>
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <p>We can use javascript to add additional functionality to a site.</p>
        <button onclick="handleClick()">Increment the counter</button>

        <p id="demo"></p>

        <script>
            let count = 0;
            function handleClick() {
                count += 1
                document.getElementById("demo").innerHTML = "You clicked the button " + count + " times."
            }
        </script>
    </body>
</html>
----

Let's walk through this code:

* In line 8, we create a `button` to which we attach an action whenever we click (`onclick`) on it. The action is called `handleClick` (but this might be any name that we give it).
* Lines 343 to 349 define the javascript.
** We set a counter to zero in line 344. This happens the moment that the page is opened or refreshed.
** The actual function is defined in lines 345 to 348. Whenever we click the button, these lines are executed.
** First we increment the counter with 1.
** Then we find the element with `id` of `demo` (`document.getElementById("demo")`) and set its contents (`innerHTML`) to the text "You clicked..."

The `document.getElementById()` might be overwhelming, but we will find easier ways to do this later.

==== Loading javascript from a file
If the code becomes a bit more involved, we can put it in a separate file, and reference it in the `<head>` like so, in line 5 below:

[source,html,linenums]
----
<html>
    <head>
        <title>My HTML file</title>
        <link rel="stylesheet" href="styles.css">
        <script src="script1.js"></script>
    </head>
    <body>
        <p>We can use javascript to add additional functionality to a site.</p>
        <button onclick="handleClick()">Increment the counter</button>

        <p id="demo"></p>
    </body>
</html>
----

.Intermezzo - The JSON format
****
From the next section onwards we will work with variables and data. At this point it is important to describe the JSON data format.

The JSON ("JavaScript Object Notation") data representation format follows the same principle as XML, in that it describes the data in the object itself. This format is used in many Application Programming Interfaces (APIs) such as https://dummyjson.com/products, as well as the internal representation of complex data in javascript code.

An example JSON object containing information about the BRCA2 gene, involved in breast cancer:

[.small]
[source,json,linenums]
----
{ id: 12345,
  common_name: "BRCA2",
  names: ["BRCA2", "ENST00000544455.6", "FACD", "FANCD1"],
  description: "Breast cancer type 2 susceptibility protein",
  location : {
    genome_build: "hg38",
    chromosome: "13",
    start: 32315086,
    end: 32400268,
    strand: "+"
  },
  diseases: [{
    name: "breast cancer",
    description: "Defects in BRCA2 are a cause of susceptibility to breast cancer (BC)"
  }, {
    name: "BROVCA2",
    description: "Defects in BRCA2 are involved in familial breast-ovarian cancer type 2"
  }, {
    name: "FANCD1",
    description: "Defects in BRCA2 are the cause of Fanconi anemia complementation group D type 1"
  }]
}
----

Data in JSON format (or javascript objects) are presented in key/value pairs. To be completely JSON-compliant the key should be put in quotes, although those are often omitted for brevity (as in the example above). Different key/value pairs are separated by a comma. JSON values can be of different types. They can be:

* **Scalars**: strings (in quotes; see e.g. `common_name` above), numbers (without quotes; see e.g. `start`), booleans (`true`/`false`), or `null`.
* **Arrays** containing zero or more elements, surrounded by square brackets (`[]`). For example, see `names` in the example above.
* Other **objects**, surrounded by curley brackets (`{}`; see e.g. `location`).

The values of arrays and objects can again be scalars, arrays or other objects. For example, the value for the `diseases` key is an array of objects.

The top-level element in a JSON-formatted file can be of any of the above types. In the example, this is an object.
****

==== Javascript basics
===== Variables
Variables in javascript are defined using the `var`, `let`, or `const` commands. For all purposes, `var` and `let` are exactly the same. There are slight differences in their scopes, but `let` was created because `var` 's scope was an important source for bugs in javascript. Ergo: use `let`. 

_Declaring_ and _assigning_ variables are two different things: a variable _declaration_ means that you create the variable and give it a name; with variable _assignment_ you give it an actual value.

For example:
[source,javascript,linenums]
----
var first_variable;           // declaration of first_variable
first_variable = "a";         // assignment of value to first_variable
let second_variable;          // declaration of second_variable
second_variable = "b";        // assignment of value to second_variable
let third_variable = "c";     // declaration and assignment done in one go
console.log(third_variable);  // value of third_value is printed to the console
third_variable = "d";         // third_variable gets a new value
console.log(third_variable);  // value of third_value is printed to the console
----

In contrast to `var` and `let`, a variable that is declared using `const` can _not_ be assigned a new value.

Everything on a line after a double forward slash (`//`) in javascript is seen as a comment and not parsed.

NOTE: We'll see later that in Svelte, you can also declare variables using `$:` instead of `let` or `const`.

===== Functions
There are several ways of creating functions in javascript. Below, we show three statements that do the same thing: take 2 arguments, add them, return the result.
[source,javascript,linenums]
----
// First version
function function_1(a,b) { return a + b }

// Second version
let function_2 = function(a,b) { return a + b }

// Third version
let function_3 = (a,b) => { return a + b }

console.log(function_1(1,2))
console.log(function_2(1,2))
console.log(function_3(1,2))
----
For the second and third version, it might sometimes be useful to use `const` (or `$:`) depending on the use case. The difference between the first version on the one hand, and the second and third on the other is not relevant in the cases that we will use them.

=== Exercises
[#exercises_htmlcssjavascript,sidebar,role=assignment]
--
Here are some exercises related to this chapter:

* Headers: https://svelte.dev/repl/1d295420874d42818954da8fcb50ad7d?version=3.59.1
* Lists: https://svelte.dev/repl/d4a024f5e6794abfa2ccc213d41c7e18?version=3.59.1
* Text tags: https://svelte.dev/repl/f1a9ed0ed9444c12a1684a00166619e3?version=3.59.1
* Styles (inline): https://svelte.dev/repl/e1f0c316e39c45cb97fbf1fe18126e4c?version=3.59.1
* CSS classes: https://svelte.dev/repl/987e9e43eab74967912e83b302401291?version=3.59.1
* Printing: https://svelte.dev/repl/f7fe97bc39ba4ecf8b9077bf5e497450?version=3.59.1
* Variables: https://svelte.dev/repl/5b50bf2c9bea4811ad62ef82ca38f18e?version=3.59.1
* Arrays: https://svelte.dev/repl/b7f4e0f2a9034b16972f82f86df39ee1?version=3.59.1
* Objects: https://svelte.dev/repl/f5fe639471b04e588048059076e25ad7?version=3.59.1
* Functions: https://svelte.dev/repl/b1e70f4349cc4a4ca8169f808794a099?version=3.59.1
* Scope: https://svelte.dev/repl/7c44e0ca379c4e869aa37d6dceb1429d?version=3.59.1
* Importing: https://svelte.dev/repl/424ccb07f0bf4a23a82ea4789f8ca25d?version=3.59.1

--
-->